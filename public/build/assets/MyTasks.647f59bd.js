import{m as D,p as S,E as $,o as r,c as n,a as e,n as T,t as c,H as m,I as y,J as B,F as j,g as k,h as M,A as N,k as x,bQ as w,G as g}from"./app.0ff6d003.js";const C=D("task",{state:()=>({tasks:[],loading:!1,error:null}),actions:{async fetchTasks(t={}){this.loading=!0,this.error=null;try{const o=await S.get("/tickets",{params:t});this.tasks=o.data.data}catch(o){this.error="Failed to fetch tasks.",console.error(o)}finally{this.loading=!1}}}}),E={class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300"},z={class:"p-4 flex items-center justify-between"},A={class:"flex items-center"},F={class:"font-bold text-gray-800"},G={class:"text-sm text-gray-500"},L={class:"flex items-center space-x-4"},O={class:"flex -space-x-2"},U=["src","alt"],V={class:"flex items-center space-x-2 text-sm text-gray-600"},q={class:"bg-gray-200 rounded-full px-3 py-1"},H={class:"bg-gray-200 rounded-full px-3 py-1"},I={__name:"TaskRow",props:{task:{type:Object,required:!0}},setup(t){const o=t,d=$(()=>({High:"bg-red-500",Medium:"bg-yellow-500",Low:"bg-green-500"})[o.task.priority]||"bg-gray-300");return(l,p)=>(r(),n("div",E,[e("div",z,[e("div",A,[e("span",{class:T(["h-2 w-2 rounded-full mr-3",d.value])},null,2),e("div",null,[e("p",F,c(t.task.title),1),e("p",G,c(t.task.projectName),1)])]),e("div",L,[e("div",O,[(r(!0),n(m,null,y(t.task.members,u=>(r(),n("img",{key:u.id,class:"inline-block h-8 w-8 rounded-full ring-2 ring-white",src:u.avatar,alt:u.name},null,8,U))),128))]),e("div",V,[e("span",q,c(t.task.startDate),1),p[0]||(p[0]=e("span",null,"\u2192",-1)),e("span",H,c(t.task.endDate),1)])])])]))}},J={class:"flex items-center mb-3"},P={class:"font-semibold text-lg text-gray-800"},Q={class:"ml-3 text-sm text-gray-500 bg-gray-200 rounded-full px-2 py-0.5"},R={class:"space-y-3"},K={__name:"TaskGroup",props:{group:{type:Object,required:!0}},setup(t){return(o,d)=>(r(),n("div",null,[e("div",J,[e("span",{class:"h-3 w-3 rounded-full mr-2",style:B({backgroundColor:t.group.color})},null,4),e("h3",P,c(t.group.title),1),e("span",Q,c(t.group.tasks.length),1)]),e("div",R,[(r(!0),n(m,null,y(t.group.tasks,l=>(r(),j(I,{key:l.id,task:l},null,8,["task"]))),128))])]))}},W={class:"flex justify-end items-center mb-6"},X={class:"flex items-center space-x-4"},Y={key:0,class:"text-center py-10"},Z={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},ee={key:2,class:"space-y-8"},se={key:3,class:"text-center py-10 text-gray-500"},re={__name:"MyTasks",setup(t){const o=C(),d=k("assigned_to_me"),l=k("priority"),p=$(()=>{const i={};return o.tasks.forEach(s=>{var f,_,h,b,v;const a=((f=s.status)==null?void 0:f.name)||"Uncategorized";i[a]||(i[a]={id:((_=s.status)==null?void 0:_.id)||0,title:a,color:((h=s.status)==null?void 0:h.color)||"#808080",tasks:[]}),i[a].tasks.push({id:s.id,title:s.name,projectName:((b=s.project)==null?void 0:b.name)||"N/A",priority:((v=s.priority)==null?void 0:v.name)||"Normal",startDate:s.created_at,endDate:s.due_date,members:s.subscribers||[]})}),Object.values(i)}),u=()=>{let i={sort:l.value};d.value==="assigned_to_me"&&(i.responsible="me"),d.value==="created_by_me"&&(i.owner="me"),o.fetchTasks(i)};return M(u),N([d,l],u),(i,s)=>(r(),n("div",null,[e("div",W,[e("div",X,[x(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>d.value=a),class:"form-select rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[...s[2]||(s[2]=[e("option",{value:"assigned_to_me"},"Assigned to Me",-1),e("option",{value:"created_by_me"},"Created by Me",-1)])],512),[[w,d.value]]),x(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>l.value=a),class:"form-select rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[...s[3]||(s[3]=[e("option",{value:"priority"},"Sort by: Priority",-1),e("option",{value:"due_date"},"Sort by: Due Date",-1)])],512),[[w,l.value]])])]),g(o).loading?(r(),n("div",Y,"Loading tasks...")):g(o).error?(r(),n("div",Z," Error: "+c(g(o).error),1)):p.value.length?(r(),n("div",ee,[(r(!0),n(m,null,y(p.value,a=>(r(),j(K,{key:a.id,group:a},null,8,["group"]))),128))])):(r(),n("div",se," No tasks found. "))]))}};export{re as default};
