import{u as S}from"./projects.9a7d75e0.js";import{_ as D,g as _,E as F,A as P,o as n,c as u,a as e,t as d,i as j,G as a,j as k,k as y,v,n as g,h as N,r as T,H as U,I as V,F as A,d as E,w as B,b as O}from"./app.0ff6d003.js";const L={class:"relative mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white"},I={class:"mt-3"},q={class:"text-lg leading-6 font-medium text-gray-900 text-center"},z={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},G={class:"text-sm font-medium text-red-800"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"mt-2 grid grid-cols-2 gap-4"},K={class:"mt-2 grid grid-cols-2 gap-4"},R={class:"items-center pt-4"},Q=["disabled"],W={__name:"ProjectFormModal",props:{project:{type:Object,default:null}},emits:["close","save"],setup(h,{emit:r}){const c=h,b=r,p=S(),s=_({id:null,name:"",description:"",ticket_prefix:"",type:"kanban",status_type:"default",cover_image:null}),x=F(()=>c.project?"Edit Project":"Create New Project");P(()=>c.project,l=>{l?s.value={id:l.id,name:l.name,description:l.description||"",ticket_prefix:l.ticket_prefix,type:l.type,status_type:l.status_type||"basic",cover_image:null}:s.value={id:null,name:"",description:"",ticket_prefix:"",type:"kanban",status_type:"basic",cover_image:null},p.error=null},{immediate:!0}),P(()=>s.value.name,l=>{c.project||(s.value.ticket_prefix=l.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,5))});const m=l=>{s.value.cover_image=l.target.files[0]},f=()=>{const l=new FormData;Object.keys(s.value).forEach(t=>{t!=="id"&&s.value[t]!==null&&l.append(t,s.value[t])}),s.value.id&&l.append("_method","PUT"),b("save",{id:s.value.id,data:l})};return(l,t)=>(n(),u("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",onClick:t[8]||(t[8]=j(o=>l.$emit("close"),["self"]))},[e("div",L,[e("div",I,[e("h3",q,d(x.value),1),e("form",{onSubmit:j(f,["prevent"]),class:"mt-4 px-4 py-3 text-left space-y-4"},[a(p).error?(n(),u("div",z,[e("p",G,d(a(p).error),1)])):k("",!0),e("div",H,[e("div",null,[t[9]||(t[9]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Project Name",-1)),y(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.name=o),required:"",class:"mt-1 form-input"},null,512),[[v,s.value.name]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"ticket_prefix",class:"block text-sm font-medium text-gray-700"},"Ticket Prefix",-1)),y(e("input",{type:"text",id:"ticket_prefix","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.ticket_prefix=o),required:"",placeholder:"e.g., PROJ",class:"mt-1 form-input"},null,512),[[v,s.value.ticket_prefix]])])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Project Type",-1)),e("div",J,[e("div",{onClick:t[2]||(t[2]=o=>s.value.type="kanban"),class:g(["p-4 border rounded-lg cursor-pointer text-center",s.value.type==="kanban"?"border-blue-500 ring-2 ring-blue-500":"border-gray-300"])},[...t[11]||(t[11]=[e("h4",{class:"font-semibold"},"Kanban",-1),e("p",{class:"text-xs text-gray-500"},"For continuous workflows.",-1)])],2),e("div",{onClick:t[3]||(t[3]=o=>s.value.type="scrum"),class:g(["p-4 border rounded-lg cursor-pointer text-center",s.value.type==="scrum"?"border-blue-500 ring-2 ring-blue-500":"border-gray-300"])},[...t[12]||(t[12]=[e("h4",{class:"font-semibold"},"Scrum",-1),e("p",{class:"text-xs text-gray-500"},"For iterative development.",-1)])],2)])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ticket Statuses",-1)),e("div",K,[e("div",{onClick:t[4]||(t[4]=o=>s.value.status_type="default"),class:g(["p-4 border rounded-lg cursor-pointer text-center",s.value.status_type==="default"?"border-blue-500 ring-2 ring-blue-500":"border-gray-300"])},[...t[14]||(t[14]=[e("h4",{class:"font-semibold"},"Default",-1),e("p",{class:"text-xs text-gray-500"},"Use system's default statuses.",-1)])],2),e("div",{onClick:t[5]||(t[5]=o=>s.value.status_type="custom"),class:g(["p-4 border rounded-lg cursor-pointer text-center",s.value.status_type==="custom"?"border-blue-500 ring-2 ring-blue-500":"border-gray-300"])},[...t[15]||(t[15]=[e("h4",{class:"font-semibold"},"Custom",-1),e("p",{class:"text-xs text-gray-500"},"Manage statuses for this project only.",-1)])],2)])]),e("div",null,[t[17]||(t[17]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),y(e("textarea",{id:"description","onUpdate:modelValue":t[6]||(t[6]=o=>s.value.description=o),rows:"3",class:"mt-1 form-input"},null,512),[[v,s.value.description]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"cover_image",class:"block text-sm font-medium text-gray-700"},"Cover Image",-1)),e("input",{type:"file",id:"cover_image",onChange:m,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),e("div",R,[e("button",{type:"submit",disabled:a(p).loading,class:"w-full px-4 py-2 bg-blue-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"},d(a(p).loading?"Saving...":"Save Project"),9,Q),e("button",{type:"button",onClick:t[7]||(t[7]=o=>l.$emit("close")),class:"w-full px-4 py-2 mt-2 bg-gray-200 text-gray-800 text-base font-medium rounded-md shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Cancel ")])],32)])])]))}},X=D(W,[["__scopeId","data-v-5275b560"]]),Y={key:0,class:"text-center py-10"},Z={key:1,class:"text-center py-10 text-red-500"},ee={key:2,class:"bg-white shadow-md rounded-lg overflow-hidden"},te={class:"min-w-full leading-normal"},se={class:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},oe={class:"flex items-center"},re=["onClick"],le={class:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},ae={class:"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight"},ie={class:"relative"},ne={class:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},de={class:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},ue={class:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},ce={class:"px-5 py-5 border-b border-gray-200 bg-white text-sm text-right"},pe=["onClick"],be=["onClick"],ge={key:0},me={class:"px-5 py-5 bg-white border-t flex flex-col xs:flex-row items-center xs:justify-between"},xe={class:"text-xs xs:text-sm text-gray-900"},fe={class:"inline-flex mt-2 xs:mt-0"},ye=["disabled"],ve=["disabled"],he={__name:"Projects",setup(h){const r=S(),c=_(!1),b=_(null);N(()=>{r.fetchProjects()});const p=t=>{t>0&&t<=r.pagination.totalPages&&r.fetchProjects(t)},s=()=>{b.value=null,c.value=!0},x=t=>{b.value={...t},c.value=!0},m=()=>{c.value=!1,b.value=null},f=async t=>{t.id?await r.updateProject(t.id,t.data):await r.createProject(t.data),r.error||m()},l=t=>{window.confirm(`Are you sure you want to delete the project "${t.name}"?`)&&r.deleteProject(t.id)};return(t,o)=>{const M=T("router-link");return n(),u("div",null,[e("div",{class:"flex justify-end mb-6"},[e("button",{onClick:s,class:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700"}," Create Project ")]),a(r).loading?(n(),u("div",Y,"Loading projects...")):a(r).error?(n(),u("div",Z,d(a(r).error),1)):(n(),u("div",ee,[e("table",te,[o[5]||(o[5]=e("thead",null,[e("tr",null,[e("th",{class:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Name "),e("th",{class:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Status "),e("th",{class:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Type "),e("th",{class:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Owner "),e("th",{class:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Created At "),e("th",{class:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100"})])],-1)),e("tbody",null,[(n(!0),u(U,null,V(a(r).projects,i=>{var w,C;return n(),u("tr",{key:i.id,class:"hover:bg-gray-50"},[e("td",se,[e("div",oe,[e("button",{onClick:$=>a(r).toggleFavorite(i.id),class:"mr-2 text-gray-400 hover:text-yellow-500"},[(n(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:g(["h-5 w-5",i.is_favorite?"text-yellow-400":""])},[...o[2]||(o[2]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])],2))],8,re),E(M,{to:{name:"ProjectDetail",params:{id:i.id}},class:"text-blue-600 hover:text-blue-900 font-semibold"},{default:B(()=>[O(d(i.name),1)]),_:2},1032,["to"])])]),e("td",le,[e("span",ae,[o[3]||(o[3]=e("span",{"aria-hidden":"",class:"absolute inset-0 bg-green-200 opacity-50 rounded-full"},null,-1)),e("span",ie,d(((w=i.status)==null?void 0:w.name)||"N/A"),1)])]),e("td",ne,[e("span",{class:g(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-blue-100 text-blue-800":i.type==="scrum","bg-purple-100 text-purple-800":i.type==="kanban"}])},d(i.type),3)]),e("td",de,d(((C=i.owner)==null?void 0:C.name)||"N/A"),1),e("td",ue,d(new Date(i.created_at).toLocaleDateString()),1),e("td",ce,[e("button",{onClick:$=>x(i),class:"text-indigo-600 hover:text-indigo-900 mr-4"},"Edit",8,pe),e("button",{onClick:$=>l(i),class:"text-red-600 hover:text-red-900"},"Delete",8,be)])])}),128)),a(r).projects.length===0?(n(),u("tr",ge,[...o[4]||(o[4]=[e("td",{colspan:"6",class:"text-center py-10 text-gray-500"},"No projects found.",-1)])])):k("",!0)])]),e("div",me,[e("span",xe," Showing "+d(a(r).projects.length)+" of "+d(a(r).pagination.total)+" projects ",1),e("div",fe,[e("button",{onClick:o[0]||(o[0]=i=>p(a(r).pagination.currentPage-1)),disabled:a(r).pagination.currentPage<=1,class:"text-sm bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-l disabled:opacity-50"}," Prev ",8,ye),e("button",{onClick:o[1]||(o[1]=i=>p(a(r).pagination.currentPage+1)),disabled:a(r).pagination.currentPage>=a(r).pagination.totalPages,class:"text-sm bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-r disabled:opacity-50"}," Next ",8,ve)])])])),c.value?(n(),A(X,{key:3,project:b.value,onClose:m,onSave:f},null,8,["project"])):k("",!0)])}}};export{he as default};
